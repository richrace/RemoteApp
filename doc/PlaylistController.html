<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: PlaylistController</title>

  <link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

  <script src="./js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="./app/Playlist/playlist_controller_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="app/Playlist/playlist_controller.rb">app/Playlist/playlist_controller.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">Rho::RhoController</p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-i-index">#index</a></li>
          
          <li><a href="#method-i-play_item">#play_item</a></li>
          
          <li><a href="#method-i-play_item_callback">#play_item_callback</a></li>
          
          <li><a href="#method-i-playlist_callback">#playlist_callback</a></li>
          
          <li><a href="#method-i-remove_item">#remove_item</a></li>
          
          <li><a href="#method-i-remove_item_callback">#remove_item_callback</a></li>
          
          <li><a href="#method-i-update_playlist">#update_playlist</a></li>
          
        </ul>
      </div>
      

      
      <!-- Included Modules -->
      <div id="includes-section" class="section">
        <h3 class="section-header">Included Modules</h3>
        <ul class="link-list">
        
        
          <li><a class="include" href="BrowserHelper.html">BrowserHelper</a></li>
        
        
        
          <li><a class="include" href="PlaylistHelper.html">PlaylistHelper</a></li>
        
        
        
          <li><a class="include" href="MethodHelper.html">MethodHelper</a></li>
        
        
        
          <li><a class="include" href="ErrorHelper.html">ErrorHelper</a></li>
        
        
        
          <li><a class="include" href="MovieHelper.html">MovieHelper</a></li>
        
        
        
          <li><a class="include" href="TvEpisodeHelper.html">TvEpisodeHelper</a></li>
        
        
        </ul>
      </div>
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="./LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./app/helpers/xbmc/xbmc-client-LICENSE.html">xbmc-client-LICENSE</a></li>
        
          <li class="file"><a href="./public/images/IUI_LICENSE_txt.html">IUI_LICENSE.txt</a></li>
        
          <li class="file"><a href="./public/jquery-toastmessage-plugin/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./public/jquery-toastmessage-plugin/NOTICE.html">NOTICE</a></li>
        
          <li class="file"><a href="./rhoconfig_txt.html">rhoconfig.txt</a></li>
        
          <li class="file"><a href="./rholog_txt.html">rholog.txt</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="./ApiV4.html">ApiV4</a></li>
        
          <li><a href="./ApiV4/Application.html">ApiV4::Application</a></li>
        
          <li><a href="./ApiV4/Input.html">ApiV4::Input</a></li>
        
          <li><a href="./ApiV4/Playback.html">ApiV4::Playback</a></li>
        
          <li><a href="./ApiV4/Playlist.html">ApiV4::Playlist</a></li>
        
          <li><a href="./ApiV4/VideoLibrary.html">ApiV4::VideoLibrary</a></li>
        
          <li><a href="./Api.html">Api</a></li>
        
          <li><a href="./Api/V2.html">Api::V2</a></li>
        
          <li><a href="./Api/V4.html">Api::V4</a></li>
        
          <li><a href="./ApiV2.html">ApiV2</a></li>
        
          <li><a href="./ApiV2/Playback.html">ApiV2::Playback</a></li>
        
          <li><a href="./ApiV2/VideoLibrary.html">ApiV2::VideoLibrary</a></li>
        
          <li><a href="./XbmcConnect.html">XbmcConnect</a></li>
        
          <li><a href="./XbmcConnect/Command.html">XbmcConnect::Command</a></li>
        
          <li><a href="./AppApplication.html">AppApplication</a></li>
        
          <li><a href="./Application4.html">Application4</a></li>
        
          <li><a href="./ApplicationHelper.html">ApplicationHelper</a></li>
        
          <li><a href="./BarcodeScanController.html">BarcodeScanController</a></li>
        
          <li><a href="./BrowserHelper.html">BrowserHelper</a></li>
        
          <li><a href="./CommandsController.html">CommandsController</a></li>
        
          <li><a href="./CommandsHelper.html">CommandsHelper</a></li>
        
          <li><a href="./Control2.html">Control2</a></li>
        
          <li><a href="./Control4.html">Control4</a></li>
        
          <li><a href="./Controls.html">Controls</a></li>
        
          <li><a href="./ControlsController.html">ControlsController</a></li>
        
          <li><a href="./DownloadHelper.html">DownloadHelper</a></li>
        
          <li><a href="./ErrorHelper.html">ErrorHelper</a></li>
        
          <li><a href="./GeoController.html">GeoController</a></li>
        
          <li><a href="./GeoHelper.html">GeoHelper</a></li>
        
          <li><a href="./Input4.html">Input4</a></li>
        
          <li><a href="./MethodHelper.html">MethodHelper</a></li>
        
          <li><a href="./MoreController.html">MoreController</a></li>
        
          <li><a href="./Movie.html">Movie</a></li>
        
          <li><a href="./MovieController.html">MovieController</a></li>
        
          <li><a href="./MovieHelper.html">MovieHelper</a></li>
        
          <li><a href="./ObjHelper.html">ObjHelper</a></li>
        
          <li><a href="./Object.html">Object</a></li>
        
          <li><a href="./Playlist4.html">Playlist4</a></li>
        
          <li><a href="./PlaylistController.html">PlaylistController</a></li>
        
          <li><a href="./PlaylistHelper.html">PlaylistHelper</a></li>
        
          <li><a href="./Product.html">Product</a></li>
        
          <li><a href="./ProductController.html">ProductController</a></li>
        
          <li><a href="./ProductHelper.html">ProductHelper</a></li>
        
          <li><a href="./SpecRunner.html">SpecRunner</a></li>
        
          <li><a href="./SpecRunnerController.html">SpecRunnerController</a></li>
        
          <li><a href="./TempClass.html">TempClass</a></li>
        
          <li><a href="./TvEpisodeHelper.html">TvEpisodeHelper</a></li>
        
          <li><a href="./TvSeasonHelper.html">TvSeasonHelper</a></li>
        
          <li><a href="./TvShowHelper.html">TvShowHelper</a></li>
        
          <li><a href="./Tvepisode.html">Tvepisode</a></li>
        
          <li><a href="./TvepisodeController.html">TvepisodeController</a></li>
        
          <li><a href="./Tvseason.html">Tvseason</a></li>
        
          <li><a href="./TvseasonController.html">TvseasonController</a></li>
        
          <li><a href="./Tvshow.html">Tvshow</a></li>
        
          <li><a href="./TvshowController.html">TvshowController</a></li>
        
          <li><a href="./VideoLibrary2.html">VideoLibrary2</a></li>
        
          <li><a href="./VideoLibrary4.html">VideoLibrary4</a></li>
        
          <li><a href="./XbmcAppHelper.html">XbmcAppHelper</a></li>
        
          <li><a href="./XbmcConfig.html">XbmcConfig</a></li>
        
          <li><a href="./XbmcConfigController.html">XbmcConfigController</a></li>
        
          <li><a href="./XbmcConfigHelper.html">XbmcConfigHelper</a></li>
        
          <li><a href="./XbmcController.html">XbmcController</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">PlaylistController</h1>

    <div id="description" class="description">
      
<p>Controller for the Playlist interface</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      

      <!-- Methods -->
      
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="index-method" class="method-detail ">
          <a name="method-i-index"></a>

          
          <div class="method-heading">
            <span class="method-name">index</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>GET /Playlist</p>
            

            
            <div class="method-source-code" id="index-source">
<pre>
<span class="ruby-comment"># File app/Playlist/playlist_controller.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">index</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- index-source -->
            
          </div>

          

          
        </div><!-- index-method -->

      
        <div id="play_item-method" class="method-detail ">
          <a name="method-i-play_item"></a>

          
          <div class="method-heading">
            <span class="method-name">play_item</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Will play the given item in the playlist based of the position.</p>
            

            
            <div class="method-source-code" id="play_item-source">
<pre>
<span class="ruby-comment"># File app/Playlist/playlist_controller.rb, line 64</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">play_item</span>
  <span class="ruby-identifier">send_command</span> {<span class="ruby-identifier">play_viedo_playlist_at_position</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-string">'position'</span>], <span class="ruby-identifier">url_for</span>(<span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:play_item_callback</span>))}
<span class="ruby-keyword">end</span></pre>
            </div><!-- play_item-source -->
            
          </div>

          

          
        </div><!-- play_item-method -->

      
        <div id="play_item_callback-method" class="method-detail ">
          <a name="method-i-play_item_callback"></a>

          
          <div class="method-heading">
            <span class="method-name">play_item_callback</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Informs the user if the request to play the media was successful or not</p>
            

            
            <div class="method-source-code" id="play_item_callback-source">
<pre>
<span class="ruby-comment"># File app/Playlist/playlist_controller.rb, line 69</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">play_item_callback</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-string">'status'</span>] <span class="ruby-operator">!=</span> <span class="ruby-string">'ok'</span>
    <span class="ruby-identifier">error_handle</span>(<span class="ruby-ivar">@params</span>)
    <span class="ruby-constant">WebView</span>.<span class="ruby-identifier">execute_js</span>(<span class="ruby-node">&quot;showToastError('#{XbmcConnect.error[:msg]}');&quot;</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-string">'body'</span>][<span class="ruby-string">'result'</span>]
      <span class="ruby-constant">WebView</span>.<span class="ruby-identifier">execute_js</span>(<span class="ruby-string">&quot;showToastSuccess('Playing from item');&quot;</span>)
      <span class="ruby-identifier">update_playlist</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- play_item_callback-source -->
            
          </div>

          

          
        </div><!-- play_item_callback-method -->

      
        <div id="playlist_callback-method" class="method-detail ">
          <a name="method-i-playlist_callback"></a>

          
          <div class="method-heading">
            <span class="method-name">playlist_callback</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Callback for update the playlist. Will inform the user of a network
connection. Will sort the returned items into Movies and TV Episodes. Will
update the display with the list of the Movies and TV Episodes. If there
are no items it will  clear the list.</p>
            

            
            <div class="method-source-code" id="playlist_callback-source">
<pre>
<span class="ruby-comment"># File app/Playlist/playlist_controller.rb, line 36</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">playlist_callback</span>
      <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-string">'status'</span>] <span class="ruby-operator">!=</span> <span class="ruby-string">'ok'</span>
    <span class="ruby-identifier">error_handle</span>(<span class="ruby-ivar">@params</span>)
    <span class="ruby-constant">WebView</span>.<span class="ruby-identifier">execute_js</span>(<span class="ruby-node">&quot;showToastError('#{XbmcConnect.error[:msg]}');&quot;</span>)       
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-string">'body'</span>].<span class="ruby-identifier">with_indifferent_access</span>[<span class="ruby-value">:result</span>]
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">result</span>[<span class="ruby-value">:items</span>]
      <span class="ruby-identifier">videos</span> = []
      <span class="ruby-identifier">result</span>[<span class="ruby-value">:items</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">item</span> <span class="ruby-operator">|</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">item</span>[<span class="ruby-value">:type</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&quot;movie&quot;</span>
          <span class="ruby-identifier">found</span> = <span class="ruby-identifier">find_movie</span>(<span class="ruby-identifier">item</span>[<span class="ruby-value">:id</span>])
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">item</span>[<span class="ruby-value">:type</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&quot;episode&quot;</span>
          <span class="ruby-identifier">found</span> = <span class="ruby-identifier">find_episode</span>(<span class="ruby-identifier">item</span>[<span class="ruby-value">:id</span>])
        <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">unless</span> <span class="ruby-identifier">found</span>.<span class="ruby-identifier">blank?</span>
          <span class="ruby-identifier">videos</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">found</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">videos</span>.<span class="ruby-identifier">blank?</span>
        <span class="ruby-constant">WebView</span>.<span class="ruby-identifier">execute_js</span>(<span class="ruby-node">&quot;updatePlaylist(#{JSON.generate(videos)});&quot;</span>)        
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">WebView</span>.<span class="ruby-identifier">execute_js</span>(<span class="ruby-string">&quot;clearList();&quot;</span>)  
    <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- playlist_callback-source -->
            
          </div>

          

          
        </div><!-- playlist_callback-method -->

      
        <div id="remove_item-method" class="method-detail ">
          <a name="method-i-remove_item"></a>

          
          <div class="method-heading">
            <span class="method-name">remove_item</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Will remove the item from the playlist based of the position.</p>
            

            
            <div class="method-source-code" id="remove_item-source">
<pre>
<span class="ruby-comment"># File app/Playlist/playlist_controller.rb, line 82</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_item</span>
  <span class="ruby-identifier">send_command</span> {<span class="ruby-identifier">remove_video_playlist_at_position</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-string">'position'</span>], <span class="ruby-identifier">url_for</span>(<span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:remove_item_callback</span>))}
<span class="ruby-keyword">end</span></pre>
            </div><!-- remove_item-source -->
            
          </div>

          

          
        </div><!-- remove_item-method -->

      
        <div id="remove_item_callback-method" class="method-detail ">
          <a name="method-i-remove_item_callback"></a>

          
          <div class="method-heading">
            <span class="method-name">remove_item_callback</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Informs the user if the request to remove item from the playlist was
successful or not.</p>
            

            
            <div class="method-source-code" id="remove_item_callback-source">
<pre>
<span class="ruby-comment"># File app/Playlist/playlist_controller.rb, line 87</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">remove_item_callback</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-string">'status'</span>] <span class="ruby-operator">!=</span> <span class="ruby-string">'ok'</span>
    <span class="ruby-identifier">error_handle</span>(<span class="ruby-ivar">@params</span>)
    <span class="ruby-constant">WebView</span>.<span class="ruby-identifier">execute_js</span>(<span class="ruby-node">&quot;showToastError('#{XbmcConnect.error[:msg]}');&quot;</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@params</span>[<span class="ruby-string">'body'</span>][<span class="ruby-string">'result'</span>]
      <span class="ruby-constant">WebView</span>.<span class="ruby-identifier">execute_js</span>(<span class="ruby-string">&quot;showToastError('Can\\\'t delete Current Playing Media');&quot;</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-constant">WebView</span>.<span class="ruby-identifier">execute_js</span>(<span class="ruby-string">&quot;showToastSuccess('Removed from Playlist');&quot;</span>)
      <span class="ruby-identifier">update_playlist</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- remove_item_callback-source -->
            
          </div>

          

          
        </div><!-- remove_item_callback-method -->

      
        <div id="update_playlist-method" class="method-detail ">
          <a name="method-i-update_playlist"></a>

          
          <div class="method-heading">
            <span class="method-name">update_playlist</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Updates the playlist</p>
            

            
            <div class="method-source-code" id="update_playlist-source">
<pre>
<span class="ruby-comment"># File app/Playlist/playlist_controller.rb, line 28</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">update_playlist</span>
      <span class="ruby-identifier">send_command</span> {<span class="ruby-identifier">update_playlist_helper</span>}
<span class="ruby-keyword">end</span></pre>
            </div><!-- update_playlist-source -->
            
          </div>

          

          
        </div><!-- update_playlist-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

