<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Class: BarcodeScanController</title>

  <link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

  <script src="./js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="class">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="./app/BarcodeScan/barcode_scan_controller_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="app/BarcodeScan/barcode_scan_controller.rb">app/BarcodeScan/barcode_scan_controller.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      
      <!-- Parent Class -->
      <div id="parent-class-section" class="section">
        <h3 class="section-header">Parent</h3>
        
        <p class="link">Rho::RhoController</p>
        
      </div>
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-i-camera_callback">#camera_callback</a></li>
          
          <li><a href="#method-i-choose">#choose</a></li>
          
          <li><a href="#method-i-handle_product">#handle_product</a></li>
          
          <li><a href="#method-i-index">#index</a></li>
          
          <li><a href="#method-i-load_geo">#load_geo</a></li>
          
          <li><a href="#method-i-new">#new</a></li>
          
          <li><a href="#method-i-search_title">#search_title</a></li>
          
          <li><a href="#method-i-take">#take</a></li>
          
          <li><a href="#method-i-take_callback">#take_callback</a></li>
          
        </ul>
      </div>
      

      
      <!-- Included Modules -->
      <div id="includes-section" class="section">
        <h3 class="section-header">Included Modules</h3>
        <ul class="link-list">
        
        
          <li><a class="include" href="ApplicationHelper.html">ApplicationHelper</a></li>
        
        
        
          <li><a class="include" href="BrowserHelper.html">BrowserHelper</a></li>
        
        
        
          <li><a class="include" href="GeoHelper.html">GeoHelper</a></li>
        
        
        
          <li><a class="include" href="ProductHelper.html">ProductHelper</a></li>
        
        
        
          <li><a class="include" href="MovieHelper.html">MovieHelper</a></li>
        
        
        
          <li><a class="include" href="ErrorHelper.html">ErrorHelper</a></li>
        
        
        </ul>
      </div>
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="./LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./app/helpers/xbmc/xbmc-client-LICENSE.html">xbmc-client-LICENSE</a></li>
        
          <li class="file"><a href="./public/images/IUI_LICENSE_txt.html">IUI_LICENSE.txt</a></li>
        
          <li class="file"><a href="./public/jquery-toastmessage-plugin/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./public/jquery-toastmessage-plugin/NOTICE.html">NOTICE</a></li>
        
          <li class="file"><a href="./rhoconfig_txt.html">rhoconfig.txt</a></li>
        
          <li class="file"><a href="./rholog_txt.html">rholog.txt</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="./ApiV4.html">ApiV4</a></li>
        
          <li><a href="./ApiV4/Application.html">ApiV4::Application</a></li>
        
          <li><a href="./ApiV4/Input.html">ApiV4::Input</a></li>
        
          <li><a href="./ApiV4/Playback.html">ApiV4::Playback</a></li>
        
          <li><a href="./ApiV4/Playlist.html">ApiV4::Playlist</a></li>
        
          <li><a href="./ApiV4/VideoLibrary.html">ApiV4::VideoLibrary</a></li>
        
          <li><a href="./Api.html">Api</a></li>
        
          <li><a href="./Api/V2.html">Api::V2</a></li>
        
          <li><a href="./Api/V4.html">Api::V4</a></li>
        
          <li><a href="./ApiV2.html">ApiV2</a></li>
        
          <li><a href="./ApiV2/Playback.html">ApiV2::Playback</a></li>
        
          <li><a href="./ApiV2/VideoLibrary.html">ApiV2::VideoLibrary</a></li>
        
          <li><a href="./XbmcConnect.html">XbmcConnect</a></li>
        
          <li><a href="./XbmcConnect/Command.html">XbmcConnect::Command</a></li>
        
          <li><a href="./AppApplication.html">AppApplication</a></li>
        
          <li><a href="./Application4.html">Application4</a></li>
        
          <li><a href="./ApplicationHelper.html">ApplicationHelper</a></li>
        
          <li><a href="./BarcodeScanController.html">BarcodeScanController</a></li>
        
          <li><a href="./BrowserHelper.html">BrowserHelper</a></li>
        
          <li><a href="./CommandsController.html">CommandsController</a></li>
        
          <li><a href="./CommandsHelper.html">CommandsHelper</a></li>
        
          <li><a href="./Control2.html">Control2</a></li>
        
          <li><a href="./Control4.html">Control4</a></li>
        
          <li><a href="./Controls.html">Controls</a></li>
        
          <li><a href="./ControlsController.html">ControlsController</a></li>
        
          <li><a href="./DownloadHelper.html">DownloadHelper</a></li>
        
          <li><a href="./ErrorHelper.html">ErrorHelper</a></li>
        
          <li><a href="./GeoController.html">GeoController</a></li>
        
          <li><a href="./GeoHelper.html">GeoHelper</a></li>
        
          <li><a href="./Input4.html">Input4</a></li>
        
          <li><a href="./MethodHelper.html">MethodHelper</a></li>
        
          <li><a href="./MoreController.html">MoreController</a></li>
        
          <li><a href="./Movie.html">Movie</a></li>
        
          <li><a href="./MovieController.html">MovieController</a></li>
        
          <li><a href="./MovieHelper.html">MovieHelper</a></li>
        
          <li><a href="./ObjHelper.html">ObjHelper</a></li>
        
          <li><a href="./Object.html">Object</a></li>
        
          <li><a href="./Playlist4.html">Playlist4</a></li>
        
          <li><a href="./PlaylistController.html">PlaylistController</a></li>
        
          <li><a href="./PlaylistHelper.html">PlaylistHelper</a></li>
        
          <li><a href="./Product.html">Product</a></li>
        
          <li><a href="./ProductController.html">ProductController</a></li>
        
          <li><a href="./ProductHelper.html">ProductHelper</a></li>
        
          <li><a href="./SpecRunner.html">SpecRunner</a></li>
        
          <li><a href="./SpecRunnerController.html">SpecRunnerController</a></li>
        
          <li><a href="./TempClass.html">TempClass</a></li>
        
          <li><a href="./TvEpisodeHelper.html">TvEpisodeHelper</a></li>
        
          <li><a href="./TvSeasonHelper.html">TvSeasonHelper</a></li>
        
          <li><a href="./TvShowHelper.html">TvShowHelper</a></li>
        
          <li><a href="./Tvepisode.html">Tvepisode</a></li>
        
          <li><a href="./TvepisodeController.html">TvepisodeController</a></li>
        
          <li><a href="./Tvseason.html">Tvseason</a></li>
        
          <li><a href="./TvseasonController.html">TvseasonController</a></li>
        
          <li><a href="./Tvshow.html">Tvshow</a></li>
        
          <li><a href="./TvshowController.html">TvshowController</a></li>
        
          <li><a href="./VideoLibrary2.html">VideoLibrary2</a></li>
        
          <li><a href="./VideoLibrary4.html">VideoLibrary4</a></li>
        
          <li><a href="./XbmcAppHelper.html">XbmcAppHelper</a></li>
        
          <li><a href="./XbmcConfig.html">XbmcConfig</a></li>
        
          <li><a href="./XbmcConfigController.html">XbmcConfigController</a></li>
        
          <li><a href="./XbmcConfigHelper.html">XbmcConfigHelper</a></li>
        
          <li><a href="./XbmcController.html">XbmcController</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="class">BarcodeScanController</h1>

    <div id="description" class="description">
      
<p>Controller for the Barcode scanning facility,</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      

      <!-- Methods -->
      
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="camera_callback-method" class="method-detail ">
          <a name="method-i-camera_callback"></a>

          
          <div class="method-heading">
            <span class="method-name">camera_callback</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Callback from choosing a picture. Starts the barcode scanning process using
the Rhodes API. Informs the user if the barcode cannot be scanned. If it
can, it uses the barcode to the load the  related product via the Google
Shopping API.</p>
            

            
            <div class="method-source-code" id="camera_callback-source">
<pre>
<span class="ruby-comment"># File app/BarcodeScan/barcode_scan_controller.rb, line 49</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">camera_callback</span>
  <span class="ruby-identifier">barcode</span> = <span class="ruby-constant">Barcode</span>.<span class="ruby-identifier">barcode_recognize</span>(<span class="ruby-constant">Rho</span><span class="ruby-operator">::</span><span class="ruby-constant">RhoApplication</span><span class="ruby-operator">::</span><span class="ruby-identifier">get_blob_path</span>(<span class="ruby-ivar">@params</span>[<span class="ruby-string">'image_uri'</span>]))
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">barcode</span>.<span class="ruby-identifier">blank?</span>
    <span class="ruby-comment"># Need the \ characters to make sure the error is displayed properlly by the JavaScript.</span>
    <span class="ruby-constant">WebView</span>.<span class="ruby-identifier">execute_js</span>(<span class="ruby-string">&quot;showToastError('Couldn\\\'t Scan the Barcode');&quot;</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">get_product</span>(<span class="ruby-identifier">barcode</span>, <span class="ruby-identifier">@@country_code</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- camera_callback-source -->
            
          </div>

          

          
        </div><!-- camera_callback-method -->

      
        <div id="choose-method" class="method-detail ">
          <a name="method-i-choose"></a>

          
          <div class="method-heading">
            <span class="method-name">choose</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Allows the user to select a picture from their Phone’s library. Uses the
Rhodes API.</p>
            

            
            <div class="method-source-code" id="choose-source">
<pre>
<span class="ruby-comment"># File app/BarcodeScan/barcode_scan_controller.rb, line 42</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">choose</span>
  <span class="ruby-constant">Camera</span><span class="ruby-operator">::</span><span class="ruby-identifier">choose_picture</span>(<span class="ruby-identifier">url_for</span> <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:camera_callback</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- choose-source -->
            
          </div>

          

          
        </div><!-- choose-method -->

      
        <div id="handle_product-method" class="method-detail ">
          <a name="method-i-handle_product"></a>

          
          <div class="method-heading">
            <span class="method-name">handle_product</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Displays the products that were found via the Google Shopping API. Will
inform the user if there was a connection problem. If there are no products
found will send the user to enter manually the  product.</p>
            

            
            <div class="method-source-code" id="handle_product-source">
<pre>
<span class="ruby-comment"># File app/BarcodeScan/barcode_scan_controller.rb, line 84</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">handle_product</span>
  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@params</span>[<span class="ruby-string">'status'</span>] <span class="ruby-operator">==</span> <span class="ruby-string">'ok'</span>
    <span class="ruby-ivar">@google_products</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-string">'body'</span>].<span class="ruby-identifier">with_indifferent_access</span>[<span class="ruby-value">:items</span>]
    <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@google_products</span>.<span class="ruby-identifier">blank?</span>
      <span class="ruby-identifier">render_transition</span>(<span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:product_list</span>)
    <span class="ruby-keyword">else</span> 
      <span class="ruby-constant">WebView</span>.<span class="ruby-identifier">execute_js</span>(<span class="ruby-string">&quot;showToastError('No Matches');&quot;</span>)
      <span class="ruby-identifier">url</span> = <span class="ruby-identifier">url_for</span>(<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:Product</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:new</span>, <span class="ruby-value">:query</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:known</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">false</span>})
      <span class="ruby-comment"># Needed to make sure the page changes. Uses JQuery Mobile to change page.</span>
      <span class="ruby-constant">WebView</span>.<span class="ruby-identifier">execute_js</span>(<span class="ruby-node">&quot;$.mobile.changePage('#{url}', { transition: 'slide'});&quot;</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">error_handle</span>(<span class="ruby-ivar">@params</span>)
    <span class="ruby-constant">WebView</span>.<span class="ruby-identifier">execute_js</span>(<span class="ruby-node">&quot;showToastError('#{XbmcConnect.error[:msg]}');&quot;</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- handle_product-source -->
            
          </div>

          

          
        </div><!-- handle_product-method -->

      
        <div id="index-method" class="method-detail ">
          <a name="method-i-index"></a>

          
          <div class="method-heading">
            <span class="method-name">index</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Sets the default country code to be US. GET /BarcodeScan</p>
            

            
            <div class="method-source-code" id="index-source">
<pre>
<span class="ruby-comment"># File app/BarcodeScan/barcode_scan_controller.rb, line 24</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">index</span>
  <span class="ruby-identifier">@@country_code</span> = <span class="ruby-string">&quot;US&quot;</span>
  <span class="ruby-identifier">render</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- index-source -->
            
          </div>

          

          
        </div><!-- index-method -->

      
        <div id="load_geo-method" class="method-detail ">
          <a name="method-i-load_geo"></a>

          
          <div class="method-heading">
            <span class="method-name">load_geo</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Loads the current GeoLocation.</p>
            

            
            <div class="method-source-code" id="load_geo-source">
<pre>
<span class="ruby-comment"># File app/BarcodeScan/barcode_scan_controller.rb, line 30</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">load_geo</span>
  <span class="ruby-identifier">get_geo</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- load_geo-source -->
            
          </div>

          

          
        </div><!-- load_geo-method -->

      
        <div id="new-method" class="method-detail ">
          <a name="method-i-new"></a>

          
          <div class="method-heading">
            <span class="method-name">new</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Takes a picture if the user can’t/doesn’t want to take a live scan. Uses
the Rhodes API.</p>
            

            
            <div class="method-source-code" id="new-source">
<pre>
<span class="ruby-comment"># File app/BarcodeScan/barcode_scan_controller.rb, line 36</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">new</span>
  <span class="ruby-constant">Camera</span><span class="ruby-operator">::</span><span class="ruby-identifier">take_picture</span>(<span class="ruby-identifier">url_for</span> <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:camera_callback</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- new-source -->
            
          </div>

          

          
        </div><!-- new-method -->

      
        <div id="search_title-method" class="method-detail ">
          <a name="method-i-search_title"></a>

          
          <div class="method-heading">
            <span class="method-name">search_title</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Checks the given title for possible matches within the Movies database.  If
there is a match it will redirect the user to the correct <a
href="Movie.html">Movie</a> information page. If there is more than one
possible match it will take the user to a list of possible matches If there
is no match, it will take the user to enter a new entry in the Buy Later
List.</p>
            

            
            <div class="method-source-code" id="search_title-source">
<pre>
<span class="ruby-comment"># File app/BarcodeScan/barcode_scan_controller.rb, line 105</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">search_title</span>
  <span class="ruby-identifier">wanted_title</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-string">'title'</span>]
  <span class="ruby-identifier">found_movies</span> = <span class="ruby-identifier">search_by_title</span>(<span class="ruby-identifier">wanted_title</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">found_movies</span>.<span class="ruby-identifier">blank?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">found_movies</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">redirect</span>(<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:Movie</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:show</span>, <span class="ruby-value">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">found_movies</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">object</span>)
    <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">found_movies</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
      <span class="ruby-comment"># Create empty string</span>
      <span class="ruby-identifier">params</span> = <span class="ruby-constant">String</span>.<span class="ruby-identifier">new</span>
      <span class="ruby-identifier">found_movies</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">movie</span> <span class="ruby-operator">|</span>
        <span class="ruby-identifier">params</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">movie</span>.<span class="ruby-identifier">xlib_id</span>.<span class="ruby-identifier">to_s</span>
        <span class="ruby-identifier">params</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-string">&quot;_&quot;</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">redirect</span>(<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:Movie</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:found</span>, <span class="ruby-value">:query</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:movies</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">params</span>})
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">redirect</span>(<span class="ruby-value">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:Product</span>, <span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:new</span>, <span class="ruby-value">:query</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:known</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword">true</span>, <span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">wanted_title</span>})
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- search_title-source -->
            
          </div>

          

          
        </div><!-- search_title-method -->

      
        <div id="take-method" class="method-detail ">
          <a name="method-i-take"></a>

          
          <div class="method-heading">
            <span class="method-name">take</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>live scan of a barcode</p>
            

            
            <div class="method-source-code" id="take-source">
<pre>
<span class="ruby-comment"># File app/BarcodeScan/barcode_scan_controller.rb, line 60</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">take</span>
  <span class="ruby-constant">Barcode</span>.<span class="ruby-identifier">take_barcode</span>(<span class="ruby-identifier">url_for</span>(<span class="ruby-value">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:take_callback</span>), {})
<span class="ruby-keyword">end</span></pre>
            </div><!-- take-source -->
            
          </div>

          

          
        </div><!-- take-method -->

      
        <div id="take_callback-method" class="method-detail ">
          <a name="method-i-take_callback"></a>

          
          <div class="method-heading">
            <span class="method-name">take_callback</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Callback for live scan of barcode, informs the user if the barcode couldn’t
be scanned. If it could will go an load the products from the Google
Shopping API.</p>
            

            
            <div class="method-source-code" id="take_callback-source">
<pre>
<span class="ruby-comment"># File app/BarcodeScan/barcode_scan_controller.rb, line 66</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">take_callback</span>
  <span class="ruby-identifier">status</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-string">'status'</span>]
  <span class="ruby-identifier">barcode</span> = <span class="ruby-ivar">@params</span>[<span class="ruby-string">'barcode'</span>]
  
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">status</span> <span class="ruby-operator">==</span> <span class="ruby-string">'cancel'</span>
    <span class="ruby-constant">Alert</span>.<span class="ruby-identifier">show_popup</span>  (<span class="ruby-string">'Barcode taking was canceled !'</span>)  
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">barcode</span>.<span class="ruby-identifier">blank?</span>
    <span class="ruby-comment"># Need the \ characters to make sure the error is displayed properlly by the JavaScript.</span>
    <span class="ruby-constant">WebView</span>.<span class="ruby-identifier">execute_js</span>(<span class="ruby-string">&quot;showToastError('Couldn\\\'t Scan the Barcode');&quot;</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">get_product</span>(<span class="ruby-identifier">barcode</span>, <span class="ruby-identifier">@@country_code</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- take_callback-source -->
            
          </div>

          

          
        </div><!-- take_callback-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

