<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

  <title>Module: TvEpisodeHelper</title>

  <link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

  <script src="./js/jquery.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/thickbox-compressed.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/quicksearch.js" type="text/javascript" charset="utf-8"></script>
  <script src="./js/darkfish.js" type="text/javascript" charset="utf-8"></script>

</head>
<body id="top" class="module">

  <div id="metadata">
    <div id="home-metadata">
      <div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
      </div>
    </div>

    <div id="file-metadata">
      <div id="file-list-section" class="section">
        <h3 class="section-header">In Files</h3>
        <div class="section-body">
          <ul>
          
            <li><a href="./app/helpers/tv_episode_helper_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
              class="thickbox" title="app/helpers/tv_episode_helper.rb">app/helpers/tv_episode_helper.rb</a></li>
          
          </ul>
        </div>
      </div>

      
    </div>

    <div id="class-metadata">
      

      

      

      
      <!-- Method Quickref -->
      <div id="method-list-section" class="section">
        <h3 class="section-header">Methods</h3>
        <ul class="link-list">
          
          <li><a href="#method-i-add_all_to_playlist">#add_all_to_playlist</a></li>
          
          <li><a href="#method-i-find_episode">#find_episode</a></li>
          
          <li><a href="#method-i-find_episodes">#find_episodes</a></li>
          
          <li><a href="#method-i-handle_new_tvepisodes">#handle_new_tvepisodes</a></li>
          
          <li><a href="#method-i-handle_removed_tvepisodes">#handle_removed_tvepisodes</a></li>
          
          <li><a href="#method-i-load_tvepisodes">#load_tvepisodes</a></li>
          
          <li><a href="#method-i-play_episode_helper">#play_episode_helper</a></li>
          
          <li><a href="#method-i-queue_episode_helper">#queue_episode_helper</a></li>
          
          <li><a href="#method-i-sync_tvepisodes">#sync_tvepisodes</a></li>
          
        </ul>
      </div>
      

      
      <!-- Included Modules -->
      <div id="includes-section" class="section">
        <h3 class="section-header">Included Modules</h3>
        <ul class="link-list">
        
        
          <li><a class="include" href="MethodHelper.html">MethodHelper</a></li>
        
        
        
          <li><a class="include" href="DownloadHelper.html">DownloadHelper</a></li>
        
        
        
          <li><a class="include" href="TvShowHelper.html">TvShowHelper</a></li>
        
        
        </ul>
      </div>
      
    </div>

    <div id="project-metadata">
      
      
      <div id="fileindex-section" class="section project-section">
        <h3 class="section-header">Files</h3>
        <ul>
        
          <li class="file"><a href="./LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./Rakefile.html">Rakefile</a></li>
        
          <li class="file"><a href="./app/helpers/xbmc/xbmc-client-LICENSE.html">xbmc-client-LICENSE</a></li>
        
          <li class="file"><a href="./public/images/IUI_LICENSE_txt.html">IUI_LICENSE.txt</a></li>
        
          <li class="file"><a href="./public/jquery-toastmessage-plugin/LICENSE.html">LICENSE</a></li>
        
          <li class="file"><a href="./public/jquery-toastmessage-plugin/NOTICE.html">NOTICE</a></li>
        
          <li class="file"><a href="./rhoconfig_txt.html">rhoconfig.txt</a></li>
        
          <li class="file"><a href="./rholog_txt.html">rholog.txt</a></li>
        
        </ul>
      </div>
      

      <div id="classindex-section" class="section project-section">
        <h3 class="section-header">Class/Module Index
          <span class="search-toggle"><img src="./images/find.png"
            height="16" width="16" alt="[+]"
            title="show/hide quicksearch" /></span></h3>
        <form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
        <fieldset>
          <legend>Quicksearch</legend>
          <input type="text" name="quicksearch" value=""
            class="quicksearch-field" />
        </fieldset>
        </form>

        <ul class="link-list">
        
          <li><a href="./ApiV4.html">ApiV4</a></li>
        
          <li><a href="./ApiV4/Application.html">ApiV4::Application</a></li>
        
          <li><a href="./ApiV4/Input.html">ApiV4::Input</a></li>
        
          <li><a href="./ApiV4/Playback.html">ApiV4::Playback</a></li>
        
          <li><a href="./ApiV4/Playlist.html">ApiV4::Playlist</a></li>
        
          <li><a href="./ApiV4/VideoLibrary.html">ApiV4::VideoLibrary</a></li>
        
          <li><a href="./Api.html">Api</a></li>
        
          <li><a href="./Api/V2.html">Api::V2</a></li>
        
          <li><a href="./Api/V4.html">Api::V4</a></li>
        
          <li><a href="./ApiV2.html">ApiV2</a></li>
        
          <li><a href="./ApiV2/Playback.html">ApiV2::Playback</a></li>
        
          <li><a href="./ApiV2/VideoLibrary.html">ApiV2::VideoLibrary</a></li>
        
          <li><a href="./XbmcConnect.html">XbmcConnect</a></li>
        
          <li><a href="./XbmcConnect/Command.html">XbmcConnect::Command</a></li>
        
          <li><a href="./AppApplication.html">AppApplication</a></li>
        
          <li><a href="./Application4.html">Application4</a></li>
        
          <li><a href="./ApplicationHelper.html">ApplicationHelper</a></li>
        
          <li><a href="./BarcodeScanController.html">BarcodeScanController</a></li>
        
          <li><a href="./BrowserHelper.html">BrowserHelper</a></li>
        
          <li><a href="./CommandsController.html">CommandsController</a></li>
        
          <li><a href="./CommandsHelper.html">CommandsHelper</a></li>
        
          <li><a href="./Control2.html">Control2</a></li>
        
          <li><a href="./Control4.html">Control4</a></li>
        
          <li><a href="./Controls.html">Controls</a></li>
        
          <li><a href="./ControlsController.html">ControlsController</a></li>
        
          <li><a href="./DownloadHelper.html">DownloadHelper</a></li>
        
          <li><a href="./ErrorHelper.html">ErrorHelper</a></li>
        
          <li><a href="./GeoController.html">GeoController</a></li>
        
          <li><a href="./GeoHelper.html">GeoHelper</a></li>
        
          <li><a href="./Input4.html">Input4</a></li>
        
          <li><a href="./MethodHelper.html">MethodHelper</a></li>
        
          <li><a href="./MoreController.html">MoreController</a></li>
        
          <li><a href="./Movie.html">Movie</a></li>
        
          <li><a href="./MovieController.html">MovieController</a></li>
        
          <li><a href="./MovieHelper.html">MovieHelper</a></li>
        
          <li><a href="./ObjHelper.html">ObjHelper</a></li>
        
          <li><a href="./Object.html">Object</a></li>
        
          <li><a href="./Playlist4.html">Playlist4</a></li>
        
          <li><a href="./PlaylistController.html">PlaylistController</a></li>
        
          <li><a href="./PlaylistHelper.html">PlaylistHelper</a></li>
        
          <li><a href="./Product.html">Product</a></li>
        
          <li><a href="./ProductController.html">ProductController</a></li>
        
          <li><a href="./ProductHelper.html">ProductHelper</a></li>
        
          <li><a href="./SpecRunner.html">SpecRunner</a></li>
        
          <li><a href="./SpecRunnerController.html">SpecRunnerController</a></li>
        
          <li><a href="./TempClass.html">TempClass</a></li>
        
          <li><a href="./TvEpisodeHelper.html">TvEpisodeHelper</a></li>
        
          <li><a href="./TvSeasonHelper.html">TvSeasonHelper</a></li>
        
          <li><a href="./TvShowHelper.html">TvShowHelper</a></li>
        
          <li><a href="./Tvepisode.html">Tvepisode</a></li>
        
          <li><a href="./TvepisodeController.html">TvepisodeController</a></li>
        
          <li><a href="./Tvseason.html">Tvseason</a></li>
        
          <li><a href="./TvseasonController.html">TvseasonController</a></li>
        
          <li><a href="./Tvshow.html">Tvshow</a></li>
        
          <li><a href="./TvshowController.html">TvshowController</a></li>
        
          <li><a href="./VideoLibrary2.html">VideoLibrary2</a></li>
        
          <li><a href="./VideoLibrary4.html">VideoLibrary4</a></li>
        
          <li><a href="./XbmcAppHelper.html">XbmcAppHelper</a></li>
        
          <li><a href="./XbmcConfig.html">XbmcConfig</a></li>
        
          <li><a href="./XbmcConfigController.html">XbmcConfigController</a></li>
        
          <li><a href="./XbmcConfigHelper.html">XbmcConfigHelper</a></li>
        
          <li><a href="./XbmcController.html">XbmcController</a></li>
        
        </ul>
        <div id="no-class-search-results" style="display: none;">No matching classes.</div>
      </div>

      
    </div>
  </div>

  <div id="documentation">
    <h1 class="module">TvEpisodeHelper</h1>

    <div id="description" class="description">
      
<p>Helper for everything to do with TV Episodes</p>

    </div><!-- description -->

    
    
    
    <div id="5Buntitled-5D" class="documentation-section">
      

      

      

      

      <!-- Methods -->
      
      <div id="public-instance-method-details" class="method-section section">
        <h3 class="section-header">Public Instance Methods</h3>

      
        <div id="add_all_to_playlist-method" class="method-detail ">
          <a name="method-i-add_all_to_playlist"></a>

          
          <div class="method-heading">
            <span class="method-name">add_all_to_playlist</span><span
              class="method-args">()</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Selects the JSON API from the Current XBMC Configuration Only version 3/4
of JSON API is supported. Adds all episodes to the playlist. Clears the
video playlist first then adds the episodes, then plays the video playlist.</p>
            

            
            <div class="method-source-code" id="add_all_to_playlist-source">
<pre>
<span class="ruby-comment"># File app/helpers/tv_episode_helper.rb, line 134</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_all_to_playlist</span>
  <span class="ruby-identifier">version</span> = <span class="ruby-constant">XbmcConfigHelper</span>.<span class="ruby-identifier">current_config</span>.<span class="ruby-identifier">version</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">version</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">version</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Api</span><span class="ruby-operator">::</span><span class="ruby-constant">V4</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">version</span> <span class="ruby-operator">==</span> <span class="ruby-value">3</span>)
      <span class="ruby-constant">Api</span><span class="ruby-operator">::</span><span class="ruby-constant">V4</span><span class="ruby-operator">::</span><span class="ruby-constant">Playlist</span>.<span class="ruby-identifier">clear_video</span>
      <span class="ruby-identifier">queue_all_episodes</span>
      <span class="ruby-constant">Api</span><span class="ruby-operator">::</span><span class="ruby-constant">V4</span><span class="ruby-operator">::</span><span class="ruby-constant">Playlist</span>.<span class="ruby-identifier">play_video</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- add_all_to_playlist-source -->
            
          </div>

          

          
        </div><!-- add_all_to_playlist-method -->

      
        <div id="find_episode-method" class="method-detail ">
          <a name="method-i-find_episode"></a>

          
          <div class="method-heading">
            <span class="method-name">find_episode</span><span
              class="method-args">(episodeid)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Finds a single Episode based upon a XBMC Library ID for TV Episode ID.  It
is filtered by the current active XBMC Configuration</p>
            

            
            <div class="method-source-code" id="find_episode-source">
<pre>
<span class="ruby-comment"># File app/helpers/tv_episode_helper.rb, line 22</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">find_episode</span>(<span class="ruby-identifier">episodeid</span>)
  <span class="ruby-constant">Tvepisode</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:first</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:xbmc_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">XbmcConfigHelper</span>.<span class="ruby-identifier">current_config</span>.<span class="ruby-identifier">object</span>, <span class="ruby-value">:xlib_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">episodeid</span>})
<span class="ruby-keyword">end</span></pre>
            </div><!-- find_episode-source -->
            
          </div>

          

          
        </div><!-- find_episode-method -->

      
        <div id="find_episodes-method" class="method-detail ">
          <a name="method-i-find_episodes"></a>

          
          <div class="method-heading">
            <span class="method-name">find_episodes</span><span
              class="method-args">(seasonid, tvshowid)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Retrieves an array of Episodes for the given TV Show ID and Season ID.
Filtered by the current active XBMC configuration.</p>
            

            
            <div class="method-source-code" id="find_episodes-source">
<pre>
<span class="ruby-comment"># File app/helpers/tv_episode_helper.rb, line 16</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">find_episodes</span>(<span class="ruby-identifier">seasonid</span>, <span class="ruby-identifier">tvshowid</span>)
  <span class="ruby-constant">Tvepisode</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">:all</span>, <span class="ruby-value">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-value">:xbmc_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">XbmcConfigHelper</span>.<span class="ruby-identifier">current_config</span>.<span class="ruby-identifier">object</span>, <span class="ruby-value">:tvshow_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tvshowid</span>, <span class="ruby-value">:tvseason_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">seasonid</span>}, <span class="ruby-value">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">:episode</span>, <span class="ruby-value">:orderdir</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">'ASC'</span>)
<span class="ruby-keyword">end</span></pre>
            </div><!-- find_episodes-source -->
            
          </div>

          

          
        </div><!-- find_episodes-method -->

      
        <div id="handle_new_tvepisodes-method" class="method-detail ">
          <a name="method-i-handle_new_tvepisodes"></a>

          
          <div class="method-heading">
            <span class="method-name">handle_new_tvepisodes</span><span
              class="method-args">(xbmc_eps)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Adds new TV Episodes. found in the XBMC library that aren’t in the Remote’s
library.</p>
            

            
            <div class="method-source-code" id="handle_new_tvepisodes-source">
<pre>
<span class="ruby-comment"># File app/helpers/tv_episode_helper.rb, line 56</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">handle_new_tvepisodes</span>(<span class="ruby-identifier">xbmc_eps</span>)
  <span class="ruby-identifier">list_changed</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-identifier">xbmc_eps</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">xbmc_ep</span> <span class="ruby-operator">|</span>
    <span class="ruby-identifier">found</span> = <span class="ruby-identifier">find_episode</span>(<span class="ruby-identifier">xbmc_ep</span>[<span class="ruby-value">:episodeid</span>])
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">found</span>.<span class="ruby-identifier">blank?</span>
      <span class="ruby-identifier">n_episode</span> = <span class="ruby-constant">Tvepisode</span>.<span class="ruby-identifier">create</span>(
        <span class="ruby-value">:xbmc_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">XbmcConfigHelper</span>.<span class="ruby-identifier">current_config</span>.<span class="ruby-identifier">object</span>, 
        <span class="ruby-value">:xlib_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">xbmc_ep</span>[<span class="ruby-value">:episodeid</span>], 
        <span class="ruby-value">:episode</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">xbmc_ep</span>[<span class="ruby-value">:episode</span>], 
        <span class="ruby-value">:firstaired</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">xbmc_ep</span>[<span class="ruby-value">:firstaired</span>], 
        <span class="ruby-value">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">xbmc_ep</span>[<span class="ruby-value">:title</span>], 
        <span class="ruby-value">:tvshow_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">xbmc_ep</span>[<span class="ruby-value">:tvshowid</span>], 
        <span class="ruby-value">:tvshow_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">find_tvshow</span>(<span class="ruby-identifier">xbmc_ep</span>[<span class="ruby-value">:tvshowid</span>]).<span class="ruby-identifier">title</span>,
        <span class="ruby-value">:tvseason_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">xbmc_ep</span>[<span class="ruby-value">:season</span>], 
        <span class="ruby-value">:runtime</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">xbmc_ep</span>[<span class="ruby-value">:runtime</span>], 
        <span class="ruby-value">:rating</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">xbmc_ep</span>[<span class="ruby-value">:rating</span>], 
        <span class="ruby-value">:plot</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">xbmc_ep</span>[<span class="ruby-value">:plot</span>], 
        <span class="ruby-value">:thumb</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">xbmc_ep</span>[<span class="ruby-value">:thumbnail</span>], 
        <span class="ruby-value">:fanart</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">xbmc_ep</span>[<span class="ruby-value">:fanart</span>])
      
      <span class="ruby-identifier">n_episode</span>.<span class="ruby-identifier">url</span> = <span class="ruby-node">&quot;/app/Tvshow/{#{n_episode.object}}/show&quot;</span>
      <span class="ruby-identifier">n_episode</span>.<span class="ruby-identifier">save</span>
              
      <span class="ruby-identifier">list_changed</span> = <span class="ruby-keyword">true</span>   
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">list_changed</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- handle_new_tvepisodes-source -->
            
          </div>

          

          
        </div><!-- handle_new_tvepisodes-method -->

      
        <div id="handle_removed_tvepisodes-method" class="method-detail ">
          <a name="method-i-handle_removed_tvepisodes"></a>

          
          <div class="method-heading">
            <span class="method-name">handle_removed_tvepisodes</span><span
              class="method-args">(xbmc_ep, seasonid, tvshowid)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Removes any TV Episode that are in the Remote’s library but not in the
XBMC’s Library</p>
            

            
            <div class="method-source-code" id="handle_removed_tvepisodes-source">
<pre>
<span class="ruby-comment"># File app/helpers/tv_episode_helper.rb, line 86</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">handle_removed_tvepisodes</span>(<span class="ruby-identifier">xbmc_ep</span>, <span class="ruby-identifier">seasonid</span>, <span class="ruby-identifier">tvshowid</span>)
  <span class="ruby-identifier">list_changed</span> = <span class="ruby-keyword">false</span> 
  
  <span class="ruby-identifier">find_episodes</span>(<span class="ruby-identifier">seasonid</span>, <span class="ruby-identifier">tvshowid</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">db_episode</span> <span class="ruby-operator">|</span>
    <span class="ruby-identifier">got</span> = <span class="ruby-keyword">false</span>
    <span class="ruby-identifier">xbmc_ep</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">xb_episode</span> <span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">db_episode</span>.<span class="ruby-identifier">xlib_id</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">xb_episode</span>[<span class="ruby-value">:episodeid</span>].<span class="ruby-identifier">to_i</span>
        <span class="ruby-identifier">got</span> = <span class="ruby-keyword">true</span> 
        <span class="ruby-keyword">break</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">got</span>
      <span class="ruby-identifier">db_episode</span>.<span class="ruby-identifier">destroy_image</span>
      <span class="ruby-identifier">db_episode</span>.<span class="ruby-identifier">destroy</span>
      <span class="ruby-identifier">list_changed</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">list_changed</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- handle_removed_tvepisodes-source -->
            
          </div>

          

          
        </div><!-- handle_removed_tvepisodes-method -->

      
        <div id="load_tvepisodes-method" class="method-detail ">
          <a name="method-i-load_tvepisodes"></a>

          
          <div class="method-heading">
            <span class="method-name">load_tvepisodes</span><span
              class="method-args">(callback, tvshowid, tvseasonid)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Selects the JSON API from the Current XBMC Configuration Only version 3/4
of JSON API is supported. Loads the Episodes with the given TV Show ID and
TV Season ID</p>
            

            
            <div class="method-source-code" id="load_tvepisodes-source">
<pre>
<span class="ruby-comment"># File app/helpers/tv_episode_helper.rb, line 29</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">load_tvepisodes</span>(<span class="ruby-identifier">callback</span>, <span class="ruby-identifier">tvshowid</span>, <span class="ruby-identifier">tvseasonid</span>)
  <span class="ruby-identifier">version</span> = <span class="ruby-constant">XbmcConfigHelper</span>.<span class="ruby-identifier">current_config</span>.<span class="ruby-identifier">version</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">version</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">if</span> (<span class="ruby-identifier">version</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Api</span><span class="ruby-operator">::</span><span class="ruby-constant">V4</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span>)  <span class="ruby-operator">||</span> (<span class="ruby-identifier">version</span> <span class="ruby-operator">==</span> <span class="ruby-value">3</span>)
      <span class="ruby-identifier">send_command</span> {<span class="ruby-constant">Api</span><span class="ruby-operator">::</span><span class="ruby-constant">V4</span><span class="ruby-operator">::</span><span class="ruby-constant">VideoLibrary</span>.<span class="ruby-identifier">get_episodes</span>(<span class="ruby-identifier">callback</span>, <span class="ruby-identifier">tvshowid</span>, <span class="ruby-identifier">tvseasonid</span>)}
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- load_tvepisodes-source -->
            
          </div>

          

          
        </div><!-- load_tvepisodes-method -->

      
        <div id="play_episode_helper-method" class="method-detail ">
          <a name="method-i-play_episode_helper"></a>

          
          <div class="method-heading">
            <span class="method-name">play_episode_helper</span><span
              class="method-args">(episodeid, callback)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Selects the JSON API from the Current XBMC Configuration Only version 3/4
of JSON API is supported. Plays a given Episode</p>
            

            
            <div class="method-source-code" id="play_episode_helper-source">
<pre>
<span class="ruby-comment"># File app/helpers/tv_episode_helper.rb, line 109</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">play_episode_helper</span>(<span class="ruby-identifier">episodeid</span>, <span class="ruby-identifier">callback</span>)
  <span class="ruby-identifier">version</span> = <span class="ruby-constant">XbmcConfigHelper</span>.<span class="ruby-identifier">current_config</span>.<span class="ruby-identifier">version</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">version</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">version</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Api</span><span class="ruby-operator">::</span><span class="ruby-constant">V4</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">version</span> <span class="ruby-operator">==</span> <span class="ruby-value">3</span>)
      <span class="ruby-constant">Api</span><span class="ruby-operator">::</span><span class="ruby-constant">V4</span><span class="ruby-operator">::</span><span class="ruby-constant">Playlist</span>.<span class="ruby-identifier">play_episode</span>(<span class="ruby-identifier">episodeid</span>, <span class="ruby-identifier">callback</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- play_episode_helper-source -->
            
          </div>

          

          
        </div><!-- play_episode_helper-method -->

      
        <div id="queue_episode_helper-method" class="method-detail ">
          <a name="method-i-queue_episode_helper"></a>

          
          <div class="method-heading">
            <span class="method-name">queue_episode_helper</span><span
              class="method-args">(episodeid, callback)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>Selects the JSON API from the Current XBMC Configuration Only version 3/4
of JSON API is supported. Add episode to the queue.</p>
            

            
            <div class="method-source-code" id="queue_episode_helper-source">
<pre>
<span class="ruby-comment"># File app/helpers/tv_episode_helper.rb, line 121</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">queue_episode_helper</span>(<span class="ruby-identifier">episodeid</span>, <span class="ruby-identifier">callback</span>)
  <span class="ruby-identifier">version</span> = <span class="ruby-constant">XbmcConfigHelper</span>.<span class="ruby-identifier">current_config</span>.<span class="ruby-identifier">version</span>.<span class="ruby-identifier">to_i</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">version</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">version</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Api</span><span class="ruby-operator">::</span><span class="ruby-constant">V4</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span> <span class="ruby-operator">||</span> (<span class="ruby-identifier">version</span> <span class="ruby-operator">==</span> <span class="ruby-value">3</span>)
      <span class="ruby-constant">Api</span><span class="ruby-operator">::</span><span class="ruby-constant">V4</span><span class="ruby-operator">::</span><span class="ruby-constant">Playlist</span>.<span class="ruby-identifier">add_episode</span>(<span class="ruby-identifier">episodeid</span>, <span class="ruby-identifier">callback</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- queue_episode_helper-source -->
            
          </div>

          

          
        </div><!-- queue_episode_helper-method -->

      
        <div id="sync_tvepisodes-method" class="method-detail ">
          <a name="method-i-sync_tvepisodes"></a>

          
          <div class="method-heading">
            <span class="method-name">sync_tvepisodes</span><span
              class="method-args">(xbmc_eps, tvshowid, seasonid)</span>
            <span class="method-click-advice">click to toggle source</span>
          </div>
          

          <div class="method-description">
            
            <p>General method to sync tv episode. The parameter is the list in the XBMC
JSON RPC format. Return either True or False if the list has been updated.
If there no episodes in the list, delete all the episodes associated with
the tv show ID and Season ID</p>
            

            
            <div class="method-source-code" id="sync_tvepisodes-source">
<pre>
<span class="ruby-comment"># File app/helpers/tv_episode_helper.rb, line 41</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sync_tvepisodes</span>(<span class="ruby-identifier">xbmc_eps</span>, <span class="ruby-identifier">tvshowid</span>, <span class="ruby-identifier">seasonid</span>)
  <span class="ruby-keyword">unless</span> <span class="ruby-identifier">xbmc_eps</span>.<span class="ruby-identifier">blank?</span>
    <span class="ruby-identifier">res</span> = <span class="ruby-identifier">handle_new_tvepisodes</span>(<span class="ruby-identifier">xbmc_eps</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">handle_removed_tvepisodes</span>(<span class="ruby-identifier">xbmc_eps</span>, <span class="ruby-identifier">seasonid</span>, <span class="ruby-identifier">tvshowid</span>)
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">episodes</span> = <span class="ruby-identifier">find_episodes</span>(<span class="ruby-identifier">seasonid</span>, <span class="ruby-identifier">tvshowid</span>)
    <span class="ruby-identifier">episodes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span> <span class="ruby-identifier">episode</span> <span class="ruby-operator">|</span>
      <span class="ruby-identifier">episode</span>.<span class="ruby-identifier">destroy_image</span>
      <span class="ruby-identifier">episode</span>.<span class="ruby-identifier">destroy</span>
      <span class="ruby-identifier">res</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">res</span>
<span class="ruby-keyword">end</span></pre>
            </div><!-- sync_tvepisodes-source -->
            
          </div>

          

          
        </div><!-- sync_tvepisodes-method -->

      
      </div><!-- public-instance-method-details -->
    
    </div><!-- 5Buntitled-5D -->
  

  </div><!-- documentation -->

  <div id="validator-badges">
    <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
    <p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
      Rdoc Generator</a> 2</small>.</p>
  </div>

</body>
</html>

